var clz=(function(){const regexp=[{pat:/\<br(.*?)(\/)?\>/gm,rep:'\n'},{pat:/[\<]/gm,rep:'&lt;'},{pat:/[\>]/gm,rep:'&gt;'},{pat:/[\t]/gm,rep:'\s\s\s\s'}];var code='',language='',theme='',plugin=[],prepare=[],execute=[],finalise=[];function loadJS(src,cb){var ref=window.document.getElementsByTagName('script')[0];var script=window.document.createElement('script');script.src=Trim(src);script.async=true;ref.parentNode.insertBefore(script,ref);if(cb&&typeof(cb)==='function'){script.onload=cb;}return script;}function loadCSS(href,before,media,callback){var ss=window.document.createElement('link');var ref=before||window.document.getElementsByTagName('script')[0];var sheets=window.document.styleSheets;ss.rel='stylesheet';ss.href=Trim(href);ss.media='only x';if(callback){ss.onload=callback;}ref.parentNode.insertBefore(ss,ref);ss.onloadcssdefined=function(cb){var defined;for(var i=0;i<sheets.length;i++){if(sheets[i].href&&sheets[i].href.indexOf(href)>-1){defined=true;}}if(defined){cb();}else{setTimeout(function(){ss.onloadcssdefined(cb);});}};ss.onloadcssdefined(function(){ss.media=media||'all';});return ss;}function Initialize(data){if(Exist(data.language)){language=Trim(data.language);}else{language='';}if(Exist(data.prepare)){prepare=data.prepare;}else{prepare=[];}if(Exist(data.execute)){execute=data.execute;}else{execute=[];}if(Exist(data.finalise)){finalise=data.finalise;}else{finalise=[];}}function Fetch(object){code=$(object).html().replace(/\<(\/)?span(.*?)?\>/gm,'');}function Save(object){$(object).html(Trim(code));}function Prepare(){$.each(regexp,function(){code=code.replace(this.pat,this.rep);});$.each(prepare,function(){code=code.replace(this.pat,this.rep);});}function Execute(){$.each(execute,function(){if(Exist(this.nested)){var nested=this.nested;var begin=this.begin;var end=this.end;Nested(nested,begin,end);}else if(Exist(this.begin)&&Exist(this.end)){var begin=this.begin.pat;var excludeBegin=this.begin.exclude;var end=this.end.pat;var excludeEnd=this.end.exclude;var pat=this.pat;var rep=this.rep;if(excludeBegin&&excludeEnd){BeginEnd(begin,end,pat,rep);}else if(excludeBegin&&!excludeEnd){BeginNotEnd(begin,end,pat,rep);}else if(!excludeBegin&&excludeEnd){NotBeginEnd(begin,end,pat,rep);}else{NotBeginNotEnd(begin,end,pat,rep);}}else if(Exist(this.custom)){var custom=this.custom;var pat=this.pat;var rep=this.rep;Custom(custom,pat,rep);}else if(Exist(this.keyword)){var keyword=this.keyword;var rep=this.rep;Keyword(keyword,rep);}});}function Finalise(){$.each(finalise,function(){code=code.replace(this.pat,this.rep);});}function BeginEnd(begin,end,pat,rep){var pattern=`${begin}([\\s\\S]*?)${end}`;var reg=new RegExp(pattern,'gm');var regCutBegin=new RegExp(begin,'gm');var regCutEnd=new RegExp(end,'gm');code=code.replace(reg,function(match){var cut=match.replace(regCutBegin,'').replace(regCutEnd,'');var temp=cut.replace(pat,rep);return match.replace(cut,temp);});}function BeginNotEnd(begin,end,pat,rep){var pattern=`${begin}([\\s\\S]*?)${end}`;var reg=new RegExp(pattern,'gm');var regCut=new RegExp(begin,'gm');code=code.replace(reg,function(match){var cut=match.replace(regCut,'');var temp=cut.replace(pat,rep);return match.replace(cut,temp);});}function NotBeginEnd(begin,end,pat,rep){var pattern=`${begin}([\\s\\S]*?)${end}`;var reg=new RegExp(pattern,'gm');var regCut=new RegExp(end,'gm');code=code.replace(reg,function(match){var cut=match.replace(regCut,'');var temp=cut.replace(pat,rep);return match.replace(cut,temp);});}function NotBeginNotEnd(begin,end,pat,rep){var pattern=`${begin}([\\s\\S]*?)${end}`;var reg=new RegExp(pattern,'gm');code=code.replace(reg,function(match){return match.replace(pat,rep);});}function Nested(nested,begin,end){var open=0,close=0,busy=false;code=code.replace(/(^\n|.+)/gm,function(match){var object=match.match(new RegExp(begin,'gm'));if(object!=null){if(!busy){match=match.replace(new RegExp(begin,'m'),`<span id="${nested}">$&<span id="block">`);busy=true;}open+=object.length;}var object=match.match(new RegExp(end,'gm'));if(object!=null){close+=object.length;}if(open==close){open=0;close=0;busy=false;match=match.replace(new RegExp(`${end}(?!(.*?)${end})`,'m'),'</span>$&</span>');}return match;});}function Custom(pattern,pat,rep){var reg=new RegExp(pattern,'gm');code=code.replace(reg,function(match){return match.replace(pat,rep);});}function Keyword(keyword,rep){code=code.replace(keyword,rep);}function Exist(value){return value!=null;}function Contain(array,value){return array.indexOf(value)>-1;}function Escape(value){return value.replace(/[\-\/\\\^\$\*\+\?\.\(\)\|\[\]\{\}]/gm,'\\$&');}function Trim(value){return value.trim();}function Validate(value){if(value!=null){return value;}}function Parameter(url){var urlReg=/((\?|\&)(theme|plugin)\=((\,)?([\w]+)){1,}){1,}/igm,themeReg=[/(\?|\&)(theme(s)?)\=(.*?)(?=(\&|$))/igm,/([\w]+)(?!(.*?)\=)/igm],pluginReg=[/(\?|\&)(plugin(s)?)\=(.*?)(?=(\&|$))/igm,/([\w]+)(?!(.*?)\=)/igm];var urlPar='',themePar='',pluginPar=[];if(Validate(url.match(urlReg))){urlPar=url.match(urlReg)[0];if(Validate(urlPar.match(themeReg[0]))){themePar=urlPar.match(themeReg[0])[0];if(Validate(themePar.match(themeReg[1]))){themePar=themePar.match(themeReg[1])[0];}}else{themePar='none';}if(Validate(urlPar.match(pluginReg[0]))){pluginPar=urlPar.match(pluginReg[0])[0];if(Validate(pluginPar.match(pluginReg[1]))){pluginPar=pluginPar.match(pluginReg[1]);}}else{pluginPar=[];}}return{theme:themePar,plugin:pluginPar};}function Feature(){$.each($('pre'),function(){var block=$(this).find('code')[0];if(!block){var lang=$(this).attr('language');if(lang){$(this).html(`<code language="${Trim(lang.toLowerCase())}">${$(this).html()}</code>`);loadJS(`https:}else{$(this).html(`<code language="none">${$(this).html()}</code>`);loadJS('https://colorizor.github.io/Languages/none.js');}}else{var langPre=$(this).attr('language'),langBlock=$(this).find('code').attr('language');if(langPre){$(this).find('code').attr('language',langPre);loadJS(`https:}else if(langBlock){loadJS(`https:}else{$(this).find('code').attr('language','none');loadJS('https://colorizor.github.io/Languages/none.js');}}});$.each($('script'),function(){var url=$(this).attr('src');var pattern=/\/colorizor(\.min)?\.js/igm;if(pattern.test(url)){var data=Parameter(url);theme=data.theme;plugin=data.plugin;loadCSS(`https:$.each(plugin,function(){loadJS(`https:});}});}return{Configure:function(){if(typeof jQuery=='undefined'){loadJS('https://ajax.googleapis.com/ajax/libs/jquery/2.2.3/jquery.min.js');}var waitForLoad=function(){if(typeof jQuery!='undefined'){Feature();}else{window.setTimeout(waitForLoad,1);}};window.setTimeout(waitForLoad,1);},Colorize:function(data){Initialize(data);$.each($(`code[language="${language}"]`),function(){$(this).css({'height':'auto','left':'0px','right':'0px','width':'auto'});Fetch($(this));Prepare();Execute();Finalise();Save($(this));});}};})();clz.Configure();
